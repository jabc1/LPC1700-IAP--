/******************************************************************************************************** 
*                                 
*                                    Address
*  
*                    (c) Copyright 20xx, Company Name, City, State
*                               All Rights Reserved
*
*
* FileName       : DAC.c
* Version        : V2.0
* Programmer(s)  : zhaojun_xf
* Parameters     : LPC1700 12.000MHz
* DebugTools     : Realview MDK V4.23              JLINK V8(SWD)
* Description    : 
*
*
********************************************************************************************************/

/********************************************************************************************************
* HeaderFiles                            
********************************************************************************************************/ 
#include "../UserCode/source/config.h"    			                        // 头文件

/********************************************************************************************************
* Variable Definition                            
********************************************************************************************************/

/********************************************************************************************************
* FunctionName   : DACInit()							   
* Description    : 初始化
* EntryParameter : None
* ReturnValue    : None
********************************************************************************************************/
void DACInit(void)
{
    GPIOSetMode(DAC_IO_PORT, DAC_IO_PIN, DAC_IO_FUN, GPIO_PULL_UP, GPIO_TPIU_DI);			
}

/********************************************************************************************************
* FunctionName   : DACConvert()							   
* Description    : DAC转换
* EntryParameter : speed - 转换速度（0-1MHz，1-400KHz）；mv - 需要转换成模拟信号的数字，单位为mv
* ReturnValue    : None
********************************************************************************************************/
void DACConvert(u8 speed, u16 mv)
{
	LPC_DAC->DACR = (speed << DAC_BIAS) | (((mv*1024) / DAC_VREF) << DAC_VALUE);
}												 

/********************************************************************************************************
*                              End Of File         
********************************************************************************************************/
